{
  "workflow": {
    "unique_name": "definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd",
    "name": "XDR - Tenant Onboard Creation Automation",
    "title": "XDR - Tenant Onboard Creation Automation",
    "type": "generic.workflow",
    "base_type": "workflow",
    "variables": [
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "Ess_Bootstrap_Status",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWH0KLG62S30jaFFmi1O8htmyZmWyl8QB",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "Essentials_Tier_SXO_OnboardStatus",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWF2MIB2R6X0fNAItzxRtJB06IKz0eZ5T",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "Essentials_Tier_User_ID",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWF1QV0EKJG0yfHBCNg0UaFRQQf2zsRFv",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "Adv_Tenant_Created_Rel_Version",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWH3M4QL3QI24IMLR7UArDOl9MvDay7Xp",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "premier_Tier_Org_ID",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWF50HJ39QP7AsltsUx0rMNsGaU0yMWLR",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "Essentials_Tier_Org_ID",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWF1YMA8CKC5rovpiYh9YntrvtFValOhP",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "Pre_Bootstrap_Status",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWH377EZZNT06gn2rsTdXbdKuZmMa63Sv",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "advantage_Tier_Org_ID",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWF3IVKFUQX2Tvdtf0bnVImNPEgUY8nqk",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "premier_Tier_SXO_OnboardStatus",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWF5BUBIUUF0UuvZz5nTqUEAMapQ7Qv1i",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "3qlGn1CxbTCOJD5CcSeOz7V0dBatAogi6lP87rXexOh2qNbs3ocpS3KovddOFhfx",
          "scope": "input",
          "name": "Mango DB App Key",
          "type": "datatype.string",
          "description": "Provide the mango DB App Key",
          "is_required": true,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWG53MDMQII4EFqXGuXJwHmCn6M9QwMwh",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "data-syggf",
          "scope": "input",
          "name": "Mango DB App Name",
          "type": "datatype.string",
          "description": "Provide DB App Name",
          "is_required": true,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWG32HJUYPK6Ufdvoj4P6UnYHCh3Cqrwz",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "advantage_Tier_SXO_OnboardStatus",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWF3VDSQSOA5i7s6jrui3qnAZjD6uEkDE",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "sxo-int",
          "scope": "input",
          "name": "DataSource",
          "type": "datatype.string",
          "description": "Enter the Data Source",
          "is_required": true,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWG8W94I4VP5w8lUVP6miJb402FSmBc2d",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "advantage_Tier_User_ID",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWF46JCUZMN4TKdtY8WKhke3quepWy9a6",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "vspancha+614-user",
          "scope": "input",
          "name": "Enter the User/Org Name",
          "type": "datatype.string",
          "description": "Ex - vspancha+614-user\n\n614 -- Release Number",
          "is_required": true,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWCXYAKNMMQ3UaVUKXQli4k4Uqjn0ah1X",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "premier_Tier_OnboardStatus",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWF4P3GVGOQ2ciVPq0mrQhNLD2YyG2JYj",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "Ess_Tenant_Created_Rel_Version",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWH3GONFBKA0mSM4Ec2yFpEMsOaYgzx9l",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "Essentials_Tier_OnboardStatus",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWF2EC2DVCA6JyHptkIkP4O3zs36bQ912",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "advantage_Tier_OnboardStatus",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWF3867KDUE27TTuoCapQpjKZ58SwlyzA",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "Pre_Tenant_Created_Rel_Version",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWH3SWT9ZJ566tI8WXWyaEF5mrGmUNxHz",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "premier_Tier_User_ID",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWF5O34FYLM1Yw5DxZbhsz5GA5g4kQlDI",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "essentials, advantage, premier",
          "scope": "input",
          "name": "Tier_Type",
          "type": "datatype.string",
          "description": "Supported tiers are tiers --essentials, advantage, premier. Send all tiers if user want to create all three if not remove the tier which user dont want to create. ",
          "is_required": true,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWC9F5VUHL22oIaV6Cw66HuuDBSbEpMnZ",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "output",
          "name": "Adv_Bootstrap_Status",
          "type": "datatype.string",
          "is_required": false,
          "display_on_wizard": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_02CWH0QCJ669K655Zpa48AXnxQ4BejC8F82",
        "object_type": "variable_workflow"
      }
    ],
    "properties": {
      "atomic": {
        "is_atomic": false
      },
      "delete_workflow_instance": false,
      "display_name": "XDR - Tenant Onboard Creation Automation",
      "runtime_user": {
        "target_default": true
      },
      "target": {
        "no_target": true
      }
    },
    "object_type": "definition_workflow",
    "actions": [
      {
        "unique_name": "definition_activity_02CWC3Q4RTLUC18uZ14KqRvES0orOJdMhSe",
        "name": "Create Token-Generate Token (Provide IROH Tenant Details)",
        "title": "Create Token-Generate Token (Provide IROH Tenant Details)",
        "type": "workflow.sub_workflow",
        "base_type": "subworkflow",
        "properties": {
          "continue_on_failure": false,
          "description": "IROH Tenant Details Needs to Provided",
          "display_name": "Create Token-Generate Token (Provide IROH Tenant Details)",
          "input": {
            "variable_workflow_02BC75FY6KJQ31bp06fvoXJ188gYh1wbUa7": "client-dc20f545-dd07-4d6b-8850-a9a5d19dedb2",
            "variable_workflow_02BC8GA3DL7UT2XvjCn2jMUeOtCfsmMDZy4": "Lt_XfbrmcpCNPibSYGvCH600fhVGyhXF30OkM5wCB0ZbBIK6Nv-TFg"
          },
          "runtime_user": {
            "target_default": true
          },
          "skip_execution": false,
          "target": {
            "execute_on_this_target": true,
            "target_id": "$module_target;Cisco XDR;securex:ao:iroh_api$",
            "target_type": "web-service.endpoint"
          },
          "workflow_id": "definition_workflow_02BC75FXY8V6Q7fCnqF2hIiteIL3tPcTIMX",
          "workflow_name": "Vinay - SXO- Create Token-Generate Token"
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_02CWC57K7YF1P1E1an2qzBWRuqVlNQ3NfJL",
        "name": "Parallel Block",
        "title": "Tenant Onboarding",
        "type": "logic.parallel",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "display_name": "Tenant Onboarding",
          "skip_execution": false
        },
        "object_type": "definition_activity",
        "blocks": [
          {
            "unique_name": "definition_activity_02CWC57KG3FHA5gMnp2BHmgs0C27wD7uhMY",
            "name": "Parallel Branch",
            "title": "Essential Tier",
            "type": "logic.parallel_block",
            "base_type": "activity",
            "properties": {
              "continue_on_failure": false,
              "display_name": "Essential Tier",
              "skip_execution": false
            },
            "object_type": "definition_activity",
            "actions": [
              {
                "unique_name": "definition_activity_02CWC4ZMP29FR1rLOvTUSC9OuX6zzUUo1OX",
                "name": "Condition Block",
                "title": "Create Tenant/User in Essentials Tier",
                "type": "logic.if_else",
                "base_type": "activity",
                "properties": {
                  "continue_on_failure": false,
                  "display_name": "Create Tenant/User in Essentials Tier",
                  "skip_execution": false
                },
                "object_type": "definition_activity",
                "blocks": [
                  {
                    "unique_name": "definition_activity_02CWC4ZMXDOMJ2lqX5VJrhh8fEe0PeH6H7E",
                    "name": "Condition Branch",
                    "title": "Essentials Tier",
                    "type": "logic.condition_block",
                    "base_type": "activity",
                    "properties": {
                      "condition": {
                        "left_operand": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWC9F5VUHL22oIaV6Cw66HuuDBSbEpMnZ$",
                        "operator": "mregex",
                        "right_operand": "(?:essentials)"
                      },
                      "continue_on_failure": false,
                      "display_name": "Essentials Tier",
                      "skip_execution": false
                    },
                    "object_type": "definition_activity",
                    "actions": [
                      {
                        "unique_name": "definition_activity_02CWCPBT7KKFC6LG8OhOGejXVG5Bqs5Z4LZ",
                        "name": "HTTP Request",
                        "title": "Create a new Account (Org + User + [Entitlement] + integrations)",
                        "type": "web-service.http_request",
                        "base_type": "activity",
                        "properties": {
                          "action_timeout": 180,
                          "allow_auto_redirect": true,
                          "allow_headers_redirect": false,
                          "body": "{\n   \"user\":{\n      \"user-email\":\"$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWCXYAKNMMQ3UaVUKXQli4k4Uqjn0ah1X$-essentials@cisco.com\",\n      \"user-name\":\"$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWCXYAKNMMQ3UaVUKXQli4k4Uqjn0ah1X$-essentials\"\n   },\n   \"org\":{\n      \"name\":\"$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWCXYAKNMMQ3UaVUKXQli4k4Uqjn0ah1X$-essentials\",\n      \"enterprise-id\":\"random\"\n   },\n   \"entitlements\":[\n      {\n         \"name\":\"tier\",\n         \"title\":\"essentials\",\n         \"quantity\":{\n            \"value\":1,\n            \"unit\":\"users\"\n         },\n         \"enforce-quantity\":true\n      }\n   ]\n}",
                          "continue_on_error_status_code": false,
                          "continue_on_failure": false,
                          "display_name": "Create a new Account (Org + User + [Entitlement] + integrations)",
                          "method": "POST",
                          "relative_url": "/provisioning/platform/account",
                          "runtime_user": {
                            "target_default": true
                          },
                          "skip_execution": false,
                          "target": {
                            "override_workflow_target": true,
                            "target_id": "$module_target;Cisco XDR;securex:ao:iroh_api$"
                          }
                        },
                        "object_type": "definition_activity"
                      },
                      {
                        "unique_name": "definition_activity_02CWD4JGJR0E15K55t1fJBkX1RI6R46zZDZ",
                        "name": "Sleep",
                        "title": "Wait for 10s",
                        "type": "core.sleep",
                        "base_type": "activity",
                        "properties": {
                          "continue_on_failure": false,
                          "display_name": "Wait for 10s",
                          "skip_execution": false,
                          "sleep_interval": 10
                        },
                        "object_type": "definition_activity"
                      },
                      {
                        "unique_name": "definition_activity_02CWD4YRV9ODR0fuk8LXWtBHBOyJP9NpRJe",
                        "name": "JSONPath Query",
                        "title": "Fetch Status , User ID and Org ID",
                        "type": "corejava.jsonpathquery",
                        "base_type": "activity",
                        "properties": {
                          "action_timeout": 180,
                          "continue_on_failure": false,
                          "display_name": "Fetch Status , User ID and Org ID",
                          "input_json": "$activity.definition_activity_02CWCPBT7KKFC6LG8OhOGejXVG5Bqs5Z4LZ.output.response_body$",
                          "jsonpath_queries": [
                            {
                              "jsonpath_query": "$.onboarding-results.sxo.body.current-state",
                              "jsonpath_query_name": "essentials_onboarding_results_sxo_body_current_state",
                              "jsonpath_query_type": "string",
                              "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                            },
                            {
                              "jsonpath_query": "$.onboarding-results.sxo.status",
                              "jsonpath_query_name": "essentials_onboarding-results_sxo_status",
                              "jsonpath_query_type": "string",
                              "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                            },
                            {
                              "jsonpath_query": "$.user.user-name",
                              "jsonpath_query_name": "essentials_Created_UserName",
                              "jsonpath_query_type": "string",
                              "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                            },
                            {
                              "jsonpath_query": "$.user.user-email",
                              "jsonpath_query_name": "essentials_Created_UserEmail",
                              "jsonpath_query_type": "string",
                              "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                            },
                            {
                              "jsonpath_query": "$.user.org-id",
                              "jsonpath_query_name": "essentials_Org_ID",
                              "jsonpath_query_type": "string",
                              "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                            },
                            {
                              "jsonpath_query": "$.user.user-id",
                              "jsonpath_query_name": "essentials_User_ID",
                              "jsonpath_query_type": "string",
                              "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                            }
                          ],
                          "skip_execution": false
                        },
                        "object_type": "definition_activity"
                      },
                      {
                        "unique_name": "definition_activity_02CWGVMHPYDTD0TV6B7BPa1xaqf353zBosI",
                        "name": "Group",
                        "title": "DB Status Check ",
                        "type": "logic.group",
                        "base_type": "activity",
                        "properties": {
                          "continue_on_failure": false,
                          "display_name": "DB Status Check ",
                          "skip_execution": false
                        },
                        "object_type": "definition_activity",
                        "actions": [
                          {
                            "unique_name": "definition_activity_02CWG1QEUVTIX27nS8b2E10OCANEXgARf0C",
                            "name": "HTTP Request",
                            "title": "Fetch Tenant Status from SXO DB",
                            "type": "web-service.http_request",
                            "base_type": "activity",
                            "properties": {
                              "action_timeout": 180,
                              "allow_auto_redirect": true,
                              "allow_headers_redirect": false,
                              "body": "{\n  \"dataSource\": \"$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWG8W94I4VP5w8lUVP6miJb402FSmBc2d$\",\n  \"database\": \"sxodb\",\n  \"collection\": \"tenants\",\n  \"filter\": {\n    \"_id\": \"$activity.definition_activity_02CWD4YRV9ODR0fuk8LXWtBHBOyJP9NpRJe.output.jsonpath_queries.essentials_Org_ID$\",\n    \"tenant_id\": \"system\"\n  }\n}",
                              "continue_on_error_status_code": false,
                              "continue_on_failure": false,
                              "custom_headers": [
                                {
                                  "name": "api-key",
                                  "value": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWG53MDMQII4EFqXGuXJwHmCn6M9QwMwh$"
                                },
                                {
                                  "name": "data-raw",
                                  "value": "{\"dataSource\":\"$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWG8W94I4VP5w8lUVP6miJb402FSmBc2d$\",\"database\":\"sxodb\",\"collection\":\"xchange\",\"filter\":{\"_id\":\"$activity.definition_activity_02CWD4YRV9ODR0fuk8LXWtBHBOyJP9NpRJe.output.jsonpath_queries.essentials_Org_ID$\", \"tenant_id\":\"system\"}}"
                                },
                                {
                                  "name": "Access-Control-Request-Headers",
                                  "value": "*"
                                }
                              ],
                              "display_name": "Fetch Tenant Status from SXO DB",
                              "method": "POST",
                              "relative_url": "/app/$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWG32HJUYPK6Ufdvoj4P6UnYHCh3Cqrwz$/endpoint/data/v1/action/find",
                              "runtime_user": {
                                "target_default": true
                              },
                              "skip_execution": false,
                              "target": {
                                "override_workflow_target": true,
                                "target_id": "definition_target_01V2DK78LVUZ907pxehYwas70qwmvnWRo22"
                              }
                            },
                            "object_type": "definition_activity"
                          },
                          {
                            "unique_name": "definition_activity_02CWGSZJ9MKQW6x2CLvvMcaTuGXlsmH7cco",
                            "name": "Sleep",
                            "title": "Wait for 10s",
                            "type": "core.sleep",
                            "base_type": "activity",
                            "properties": {
                              "continue_on_failure": false,
                              "display_name": "Wait for 10s",
                              "skip_execution": false,
                              "sleep_interval": 10
                            },
                            "object_type": "definition_activity"
                          },
                          {
                            "unique_name": "definition_activity_02CWGQ6A8JV8M3wi8t4NAUS2BKVPP6JcOKc",
                            "name": "JSONPath Query",
                            "title": "Fetch Tenant Status and Version",
                            "type": "corejava.jsonpathquery",
                            "base_type": "activity",
                            "properties": {
                              "action_timeout": 180,
                              "continue_on_failure": true,
                              "display_name": "Fetch Tenant Status and Version",
                              "input_json": "$activity.definition_activity_02CWG1QEUVTIX27nS8b2E10OCANEXgARf0C.output.response_body$",
                              "jsonpath_queries": [
                                {
                                  "jsonpath_query": "$.documents..status.state",
                                  "jsonpath_query_name": "Essentials_Tenant_BootStrap_Status",
                                  "jsonpath_query_type": "string",
                                  "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                                },
                                {
                                  "jsonpath_query": "$.documents..version",
                                  "jsonpath_query_name": "Essentials_Tenant_Release_Version",
                                  "jsonpath_query_type": "string"
                                }
                              ],
                              "skip_execution": false
                            },
                            "object_type": "definition_activity"
                          }
                        ]
                      },
                      {
                        "unique_name": "definition_activity_02CWF5ZQ15U3J2IaymzZmApMaAxOyJty3hq",
                        "name": "Set Variables",
                        "title": "Store Variables",
                        "type": "core.set_multiple_variables",
                        "base_type": "activity",
                        "properties": {
                          "continue_on_failure": false,
                          "display_name": "Store Variables",
                          "skip_execution": false,
                          "variables_to_update": [
                            {
                              "variable_to_update": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.output.variable_workflow_02CWF2EC2DVCA6JyHptkIkP4O3zs36bQ912$",
                              "variable_value_new": "$activity.definition_activity_02CWD4YRV9ODR0fuk8LXWtBHBOyJP9NpRJe.output.jsonpath_queries.essentials_onboarding_results_sxo_body_current_state$"
                            },
                            {
                              "variable_to_update": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.output.variable_workflow_02CWF1YMA8CKC5rovpiYh9YntrvtFValOhP$",
                              "variable_value_new": "$activity.definition_activity_02CWD4YRV9ODR0fuk8LXWtBHBOyJP9NpRJe.output.jsonpath_queries.essentials_Org_ID$"
                            },
                            {
                              "variable_to_update": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.output.variable_workflow_02CWF2MIB2R6X0fNAItzxRtJB06IKz0eZ5T$",
                              "variable_value_new": "$activity.definition_activity_02CWD4YRV9ODR0fuk8LXWtBHBOyJP9NpRJe.output.jsonpath_queries.essentials_onboarding-results_sxo_status$"
                            },
                            {
                              "variable_to_update": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.output.variable_workflow_02CWF1QV0EKJG0yfHBCNg0UaFRQQf2zsRFv$",
                              "variable_value_new": "$activity.definition_activity_02CWD4YRV9ODR0fuk8LXWtBHBOyJP9NpRJe.output.jsonpath_queries.essentials_User_ID$"
                            },
                            {
                              "variable_to_update": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.output.variable_workflow_02CWH0KLG62S30jaFFmi1O8htmyZmWyl8QB$",
                              "variable_value_new": "$activity.definition_activity_02CWGQ6A8JV8M3wi8t4NAUS2BKVPP6JcOKc.output.jsonpath_queries.Essentials_Tenant_BootStrap_Status$"
                            },
                            {
                              "variable_to_update": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.output.variable_workflow_02CWH3GONFBKA0mSM4Ec2yFpEMsOaYgzx9l$",
                              "variable_value_new": "$activity.definition_activity_02CWGQ6A8JV8M3wi8t4NAUS2BKVPP6JcOKc.output.jsonpath_queries.Essentials_Tenant_Release_Version$"
                            }
                          ]
                        },
                        "object_type": "definition_activity"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "unique_name": "definition_activity_02CWC57KRXVJY5qDHT0gAIF4G3qJXo42QEp",
            "name": "Parallel Branch",
            "title": "Advantage Tier",
            "type": "logic.parallel_block",
            "base_type": "activity",
            "properties": {
              "continue_on_failure": false,
              "display_name": "Advantage Tier",
              "skip_execution": false
            },
            "object_type": "definition_activity",
            "actions": [
              {
                "unique_name": "definition_activity_02CWC52UX47A72x54fjLgJ6aCfxzJiZ9jhO",
                "name": "Condition Block",
                "title": "Create Tenant/User in Advantage Tier",
                "type": "logic.if_else",
                "base_type": "activity",
                "properties": {
                  "continue_on_failure": false,
                  "display_name": "Create Tenant/User in Advantage Tier",
                  "skip_execution": false
                },
                "object_type": "definition_activity",
                "blocks": [
                  {
                    "unique_name": "definition_activity_02CWC52UX53131KgbawBMh1jl6F9TNpsTiG",
                    "name": "Condition Branch",
                    "title": "Advantage Tier",
                    "type": "logic.condition_block",
                    "base_type": "activity",
                    "properties": {
                      "condition": {
                        "left_operand": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWC9F5VUHL22oIaV6Cw66HuuDBSbEpMnZ$",
                        "operator": "mregex",
                        "right_operand": "(?:advantage)"
                      },
                      "continue_on_failure": false,
                      "display_name": "Advantage Tier",
                      "skip_execution": false
                    },
                    "object_type": "definition_activity",
                    "actions": [
                      {
                        "unique_name": "definition_activity_02CWD06N3T7EZ6CBEwSAyhQxSjfqQ5X4yis",
                        "name": "HTTP Request",
                        "title": "Create a new Account (Org + User + [Entitlement] + integrations)",
                        "type": "web-service.http_request",
                        "base_type": "activity",
                        "properties": {
                          "action_timeout": 180,
                          "allow_auto_redirect": true,
                          "allow_headers_redirect": false,
                          "body": "{\n   \"user\":{\n      \"user-email\":\"$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWCXYAKNMMQ3UaVUKXQli4k4Uqjn0ah1X$-advantage@cisco.com\",\n      \"user-name\":\"$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWCXYAKNMMQ3UaVUKXQli4k4Uqjn0ah1X$-advantage\"\n   },\n   \"org\":{\n      \"name\":\"$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWCXYAKNMMQ3UaVUKXQli4k4Uqjn0ah1X$-advantage\",\n      \"enterprise-id\":\"random\"\n   },\n   \"entitlements\":[\n      {\n         \"name\":\"tier\",\n         \"title\":\"advantage\",\n         \"quantity\":{\n            \"value\":1,\n            \"unit\":\"users\"\n         },\n         \"enforce-quantity\":true\n      }\n   ]\n}",
                          "continue_on_error_status_code": false,
                          "continue_on_failure": false,
                          "display_name": "Create a new Account (Org + User + [Entitlement] + integrations)",
                          "method": "POST",
                          "relative_url": "/provisioning/platform/account",
                          "runtime_user": {
                            "target_default": true
                          },
                          "skip_execution": false,
                          "target": {
                            "override_workflow_target": true,
                            "target_id": "$module_target;Cisco XDR;securex:ao:iroh_api$"
                          }
                        },
                        "object_type": "definition_activity"
                      },
                      {
                        "unique_name": "definition_activity_02CWD4PNTYDNU56slWeRtEVC8PrRpuFN86m",
                        "name": "Sleep",
                        "title": "Wait for 10s",
                        "type": "core.sleep",
                        "base_type": "activity",
                        "properties": {
                          "continue_on_failure": false,
                          "display_name": "Wait for 10s",
                          "skip_execution": false,
                          "sleep_interval": 10
                        },
                        "object_type": "definition_activity"
                      },
                      {
                        "unique_name": "definition_activity_02CWEPVVPAFGE3dcnJgn7uUEVJoHZ1xlFV8",
                        "name": "JSONPath Query",
                        "title": "Fetch Status , User ID and Org ID",
                        "type": "corejava.jsonpathquery",
                        "base_type": "activity",
                        "properties": {
                          "action_timeout": 180,
                          "continue_on_failure": false,
                          "display_name": "Fetch Status , User ID and Org ID",
                          "input_json": "$activity.definition_activity_02CWD06N3T7EZ6CBEwSAyhQxSjfqQ5X4yis.output.response_body$",
                          "jsonpath_queries": [
                            {
                              "jsonpath_query": "$.onboarding-results.sxo.body.current-state",
                              "jsonpath_query_name": "advantage_onboarding_results_sxo_body_current_state",
                              "jsonpath_query_type": "string",
                              "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                            },
                            {
                              "jsonpath_query": "$.onboarding-results.sxo.status",
                              "jsonpath_query_name": "advantage_onboarding-results_sxo_status",
                              "jsonpath_query_type": "string",
                              "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                            },
                            {
                              "jsonpath_query": "$.user.user-name",
                              "jsonpath_query_name": "advantage_Created_UserName",
                              "jsonpath_query_type": "string",
                              "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                            },
                            {
                              "jsonpath_query": "$.user.user-email",
                              "jsonpath_query_name": "advantage_Created_UserEmail",
                              "jsonpath_query_type": "string",
                              "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                            },
                            {
                              "jsonpath_query": "$.user.org-id",
                              "jsonpath_query_name": "advantage_Org_ID",
                              "jsonpath_query_type": "string",
                              "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                            },
                            {
                              "jsonpath_query": "$.user.user-id",
                              "jsonpath_query_name": "advantage_User_ID",
                              "jsonpath_query_type": "string",
                              "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                            }
                          ],
                          "skip_execution": false
                        },
                        "object_type": "definition_activity"
                      },
                      {
                        "unique_name": "definition_activity_02CWGW5K179O74MsDeV9Cfdgn9950dA5EqT",
                        "name": "Group",
                        "title": "DB Status Check ",
                        "type": "logic.group",
                        "base_type": "activity",
                        "properties": {
                          "continue_on_failure": false,
                          "display_name": "DB Status Check ",
                          "skip_execution": false
                        },
                        "object_type": "definition_activity",
                        "actions": [
                          {
                            "unique_name": "definition_activity_02CWGW5K1BLTP1SeraVueakIxRCIhq9Wcwd",
                            "name": "HTTP Request",
                            "title": "Fetch Tenant Status from SXO DB",
                            "type": "web-service.http_request",
                            "base_type": "activity",
                            "properties": {
                              "action_timeout": 180,
                              "allow_auto_redirect": true,
                              "allow_headers_redirect": false,
                              "body": "{\n  \"dataSource\": \"$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWG8W94I4VP5w8lUVP6miJb402FSmBc2d$\",\n  \"database\": \"sxodb\",\n  \"collection\": \"tenants\",\n  \"filter\": {\n    \"_id\": \"$activity.definition_activity_02CWEPVVPAFGE3dcnJgn7uUEVJoHZ1xlFV8.output.jsonpath_queries.advantage_Org_ID$\",\n    \"tenant_id\": \"system\"\n  }\n}",
                              "continue_on_error_status_code": false,
                              "continue_on_failure": false,
                              "custom_headers": [
                                {
                                  "name": "api-key",
                                  "value": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWG53MDMQII4EFqXGuXJwHmCn6M9QwMwh$"
                                },
                                {
                                  "name": "data-raw",
                                  "value": "{\"dataSource\":\"$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWG8W94I4VP5w8lUVP6miJb402FSmBc2d$\",\"database\":\"sxodb\",\"collection\":\"xchange\",\"filter\":{\"_id\":\"$activity.definition_activity_02CWEPVVPAFGE3dcnJgn7uUEVJoHZ1xlFV8.output.jsonpath_queries.advantage_Org_ID$\", \"tenant_id\":\"system\"}}"
                                },
                                {
                                  "name": "Access-Control-Request-Headers",
                                  "value": "*"
                                }
                              ],
                              "display_name": "Fetch Tenant Status from SXO DB",
                              "method": "POST",
                              "relative_url": "/app/$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWG32HJUYPK6Ufdvoj4P6UnYHCh3Cqrwz$/endpoint/data/v1/action/find",
                              "runtime_user": {
                                "target_default": true
                              },
                              "skip_execution": false,
                              "target": {
                                "override_workflow_target": true,
                                "target_id": "definition_target_01V2DK78LVUZ907pxehYwas70qwmvnWRo22"
                              }
                            },
                            "object_type": "definition_activity"
                          },
                          {
                            "unique_name": "definition_activity_02CWGW5K1CJNH1Pbskkp6l6OBeQLGVIW2H6",
                            "name": "Sleep",
                            "title": "Wait for 10s",
                            "type": "core.sleep",
                            "base_type": "activity",
                            "properties": {
                              "continue_on_failure": false,
                              "display_name": "Wait for 10s",
                              "skip_execution": false,
                              "sleep_interval": 10
                            },
                            "object_type": "definition_activity"
                          },
                          {
                            "unique_name": "definition_activity_02CWGW5K1EB6Z6EiYtG3I7EFDVCSDH3kmgq",
                            "name": "JSONPath Query",
                            "title": "Fetch Tenant Status and Version",
                            "type": "corejava.jsonpathquery",
                            "base_type": "activity",
                            "properties": {
                              "action_timeout": 180,
                              "continue_on_failure": true,
                              "display_name": "Fetch Tenant Status and Version",
                              "input_json": "$activity.definition_activity_02CWGW5K1BLTP1SeraVueakIxRCIhq9Wcwd.output.response_body$",
                              "jsonpath_queries": [
                                {
                                  "jsonpath_query": "$.documents..status.state",
                                  "jsonpath_query_name": "Advantage_Tenant_BootStrap_Status",
                                  "jsonpath_query_type": "string",
                                  "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                                },
                                {
                                  "jsonpath_query": "$.documents..version",
                                  "jsonpath_query_name": "Advantage_Tenant_Release_Version",
                                  "jsonpath_query_type": "string",
                                  "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                                }
                              ],
                              "skip_execution": false
                            },
                            "object_type": "definition_activity"
                          }
                        ]
                      },
                      {
                        "unique_name": "definition_activity_02CWF7HCU6US233JKhKZbVbiJVKQQhjq3Dz",
                        "name": "Set Variables",
                        "title": "Store Variables",
                        "type": "core.set_multiple_variables",
                        "base_type": "activity",
                        "properties": {
                          "continue_on_failure": false,
                          "display_name": "Store Variables",
                          "skip_execution": false,
                          "variables_to_update": [
                            {
                              "variable_to_update": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.output.variable_workflow_02CWF3867KDUE27TTuoCapQpjKZ58SwlyzA$",
                              "variable_value_new": "$activity.definition_activity_02CWEPVVPAFGE3dcnJgn7uUEVJoHZ1xlFV8.output.jsonpath_queries.advantage_onboarding_results_sxo_body_current_state$"
                            },
                            {
                              "variable_to_update": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.output.variable_workflow_02CWF3IVKFUQX2Tvdtf0bnVImNPEgUY8nqk$",
                              "variable_value_new": "$activity.definition_activity_02CWEPVVPAFGE3dcnJgn7uUEVJoHZ1xlFV8.output.jsonpath_queries.advantage_Org_ID$"
                            },
                            {
                              "variable_to_update": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.output.variable_workflow_02CWF3VDSQSOA5i7s6jrui3qnAZjD6uEkDE$",
                              "variable_value_new": "$activity.definition_activity_02CWEPVVPAFGE3dcnJgn7uUEVJoHZ1xlFV8.output.jsonpath_queries.advantage_onboarding-results_sxo_status$"
                            },
                            {
                              "variable_to_update": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.output.variable_workflow_02CWF46JCUZMN4TKdtY8WKhke3quepWy9a6$",
                              "variable_value_new": "$activity.definition_activity_02CWEPVVPAFGE3dcnJgn7uUEVJoHZ1xlFV8.output.jsonpath_queries.advantage_User_ID$"
                            },
                            {
                              "variable_to_update": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.output.variable_workflow_02CWH0QCJ669K655Zpa48AXnxQ4BejC8F82$",
                              "variable_value_new": "$activity.definition_activity_02CWGW5K1EB6Z6EiYtG3I7EFDVCSDH3kmgq.output.jsonpath_queries.Advantage_Tenant_BootStrap_Status$"
                            },
                            {
                              "variable_to_update": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.output.variable_workflow_02CWH3M4QL3QI24IMLR7UArDOl9MvDay7Xp$",
                              "variable_value_new": "$activity.definition_activity_02CWGW5K1EB6Z6EiYtG3I7EFDVCSDH3kmgq.output.jsonpath_queries.Advantage_Tenant_Release_Version$"
                            }
                          ]
                        },
                        "object_type": "definition_activity"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "unique_name": "definition_activity_02CWC5933FEZB7l7e4Sed20He4VNrNhjmbO",
            "name": "Parallel Branch",
            "title": "Premier Tier",
            "type": "logic.parallel_block",
            "base_type": "activity",
            "properties": {
              "continue_on_failure": false,
              "display_name": "Premier Tier",
              "skip_execution": false
            },
            "object_type": "definition_activity",
            "actions": [
              {
                "unique_name": "definition_activity_02CWC5124D42H7MQDNnrdBn01fHpjPJRLEH",
                "name": "Condition Block",
                "title": "Create Tenant/User in premier Tier",
                "type": "logic.if_else",
                "base_type": "activity",
                "properties": {
                  "continue_on_failure": false,
                  "display_name": "Create Tenant/User in premier Tier",
                  "skip_execution": false
                },
                "object_type": "definition_activity",
                "blocks": [
                  {
                    "unique_name": "definition_activity_02CWC5124EMWZ3oAGJYKtK7wrskUhqCCblz",
                    "name": "Condition Branch",
                    "title": "Premier Tier",
                    "type": "logic.condition_block",
                    "base_type": "activity",
                    "properties": {
                      "condition": {
                        "left_operand": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWC9F5VUHL22oIaV6Cw66HuuDBSbEpMnZ$",
                        "operator": "mregex",
                        "right_operand": "(?:premier)"
                      },
                      "continue_on_failure": false,
                      "display_name": "Premier Tier",
                      "skip_execution": false
                    },
                    "object_type": "definition_activity",
                    "actions": [
                      {
                        "unique_name": "definition_activity_02CWD0A5QARKJ2QoyNYHOmE2LgrQIWebqg5",
                        "name": "HTTP Request",
                        "title": "Create a new Account (Org + User + [Entitlement] + integrations)",
                        "type": "web-service.http_request",
                        "base_type": "activity",
                        "properties": {
                          "action_timeout": 180,
                          "allow_auto_redirect": true,
                          "allow_headers_redirect": false,
                          "body": "{\n   \"user\":{\n      \"user-email\":\"$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWCXYAKNMMQ3UaVUKXQli4k4Uqjn0ah1X$-premier@cisco.com\",\n      \"user-name\":\"$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWCXYAKNMMQ3UaVUKXQli4k4Uqjn0ah1X$-premier\"\n   },\n   \"org\":{\n      \"name\":\"$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWCXYAKNMMQ3UaVUKXQli4k4Uqjn0ah1X$-premier\",\n      \"enterprise-id\":\"random\"\n   },\n   \"entitlements\":[\n      {\n         \"name\":\"tier\",\n         \"title\":\"premier\",\n         \"quantity\":{\n            \"value\":1,\n            \"unit\":\"users\"\n         },\n         \"enforce-quantity\":true\n      }\n   ]\n}",
                          "continue_on_error_status_code": false,
                          "continue_on_failure": false,
                          "display_name": "Create a new Account (Org + User + [Entitlement] + integrations)",
                          "method": "POST",
                          "relative_url": "/provisioning/platform/account",
                          "runtime_user": {
                            "target_default": true
                          },
                          "skip_execution": false,
                          "target": {
                            "override_workflow_target": true,
                            "target_id": "$module_target;Cisco XDR;securex:ao:iroh_api$"
                          }
                        },
                        "object_type": "definition_activity"
                      },
                      {
                        "unique_name": "definition_activity_02CWD4SKUOVVQ43g9X6nwlNMzrrGjNE5WC2",
                        "name": "Sleep",
                        "title": "Wait for 10s",
                        "type": "core.sleep",
                        "base_type": "activity",
                        "properties": {
                          "continue_on_failure": false,
                          "display_name": "Wait for 10s",
                          "skip_execution": false,
                          "sleep_interval": 10
                        },
                        "object_type": "definition_activity"
                      },
                      {
                        "unique_name": "definition_activity_02CWESMCMMQ6L0ylC4S1o8BWxfWOkKkCPOl",
                        "name": "JSONPath Query",
                        "title": "Fetch Status , User ID and Org ID",
                        "type": "corejava.jsonpathquery",
                        "base_type": "activity",
                        "properties": {
                          "action_timeout": 180,
                          "continue_on_failure": false,
                          "display_name": "Fetch Status , User ID and Org ID",
                          "input_json": "$activity.definition_activity_02CWD0A5QARKJ2QoyNYHOmE2LgrQIWebqg5.output.response_body$",
                          "jsonpath_queries": [
                            {
                              "jsonpath_query": "$.onboarding-results.sxo.body.current-state",
                              "jsonpath_query_name": "premier_onboarding_results_sxo_body_current_state",
                              "jsonpath_query_type": "string",
                              "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                            },
                            {
                              "jsonpath_query": "$.onboarding-results.sxo.status",
                              "jsonpath_query_name": "premier_onboarding-results_sxo_status",
                              "jsonpath_query_type": "string",
                              "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                            },
                            {
                              "jsonpath_query": "$.user.user-name",
                              "jsonpath_query_name": "premier_Created_UserName",
                              "jsonpath_query_type": "string",
                              "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                            },
                            {
                              "jsonpath_query": "$.user.user-email",
                              "jsonpath_query_name": "premier_Created_UserEmail",
                              "jsonpath_query_type": "string",
                              "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                            },
                            {
                              "jsonpath_query": "$.user.org-id",
                              "jsonpath_query_name": "premier_Org_ID",
                              "jsonpath_query_type": "string",
                              "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                            },
                            {
                              "jsonpath_query": "$.user.user-id",
                              "jsonpath_query_name": "premier_User_ID",
                              "jsonpath_query_type": "string",
                              "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                            }
                          ],
                          "skip_execution": false
                        },
                        "object_type": "definition_activity"
                      },
                      {
                        "unique_name": "definition_activity_02CWGW9VJQDRP41ucpUl03TDXEIwY3XnG3s",
                        "name": "Group",
                        "title": "DB Status Check ",
                        "type": "logic.group",
                        "base_type": "activity",
                        "properties": {
                          "continue_on_failure": false,
                          "display_name": "DB Status Check ",
                          "skip_execution": false
                        },
                        "object_type": "definition_activity",
                        "actions": [
                          {
                            "unique_name": "definition_activity_02CWGW9VJUQGQ1v4AKcKMvsELVA1nC8FR8t",
                            "name": "HTTP Request",
                            "title": "Fetch Tenant Status from SXO DB",
                            "type": "web-service.http_request",
                            "base_type": "activity",
                            "properties": {
                              "action_timeout": 180,
                              "allow_auto_redirect": true,
                              "allow_headers_redirect": false,
                              "body": "{\n  \"dataSource\": \"$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWG8W94I4VP5w8lUVP6miJb402FSmBc2d$\",\n  \"database\": \"sxodb\",\n  \"collection\": \"tenants\",\n  \"filter\": {\n    \"_id\": \"$activity.definition_activity_02CWESMCMMQ6L0ylC4S1o8BWxfWOkKkCPOl.output.jsonpath_queries.premier_Org_ID$\",\n    \"tenant_id\": \"system\"\n  }\n}",
                              "continue_on_error_status_code": false,
                              "continue_on_failure": false,
                              "custom_headers": [
                                {
                                  "name": "api-key",
                                  "value": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWG53MDMQII4EFqXGuXJwHmCn6M9QwMwh$"
                                },
                                {
                                  "name": "data-raw",
                                  "value": "{\"dataSource\":\"$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWG8W94I4VP5w8lUVP6miJb402FSmBc2d$\",\"database\":\"sxodb\",\"collection\":\"xchange\",\"filter\":{\"_id\":\"$activity.definition_activity_02CWESMCMMQ6L0ylC4S1o8BWxfWOkKkCPOl.output.jsonpath_queries.premier_Org_ID$\", \"tenant_id\":\"system\"}}"
                                },
                                {
                                  "name": "Access-Control-Request-Headers",
                                  "value": "*"
                                }
                              ],
                              "display_name": "Fetch Tenant Status from SXO DB",
                              "method": "POST",
                              "relative_url": "/app/$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.input.variable_workflow_02CWG32HJUYPK6Ufdvoj4P6UnYHCh3Cqrwz$/endpoint/data/v1/action/find",
                              "runtime_user": {
                                "target_default": true
                              },
                              "skip_execution": false,
                              "target": {
                                "override_workflow_target": true,
                                "target_id": "definition_target_01V2DK78LVUZ907pxehYwas70qwmvnWRo22"
                              }
                            },
                            "object_type": "definition_activity"
                          },
                          {
                            "unique_name": "definition_activity_02CWGW9VJVJW86cgnIcYqpo0tZkySQRkJrk",
                            "name": "Sleep",
                            "title": "Wait for 10s",
                            "type": "core.sleep",
                            "base_type": "activity",
                            "properties": {
                              "continue_on_failure": false,
                              "display_name": "Wait for 10s",
                              "skip_execution": false,
                              "sleep_interval": 10
                            },
                            "object_type": "definition_activity"
                          },
                          {
                            "unique_name": "definition_activity_02CWGW9VJXE7Z3kkhvJdJikdMkrZfuvvSxd",
                            "name": "JSONPath Query",
                            "title": "Fetch Tenant Status and Version",
                            "type": "corejava.jsonpathquery",
                            "base_type": "activity",
                            "properties": {
                              "action_timeout": 180,
                              "continue_on_failure": true,
                              "display_name": "Fetch Tenant Status and Version",
                              "input_json": "$activity.definition_activity_02CWGW9VJUQGQ1v4AKcKMvsELVA1nC8FR8t.output.response_body$",
                              "jsonpath_queries": [
                                {
                                  "jsonpath_query": "$.documents..status.state",
                                  "jsonpath_query_name": "Preimer_Tenant_BootStrap_Status",
                                  "jsonpath_query_type": "string",
                                  "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                                },
                                {
                                  "jsonpath_query": "$.documents..version",
                                  "jsonpath_query_name": "Preimer_Tenant_Release_Version",
                                  "jsonpath_query_type": "string",
                                  "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                                }
                              ],
                              "skip_execution": false
                            },
                            "object_type": "definition_activity"
                          }
                        ]
                      },
                      {
                        "unique_name": "definition_activity_02CWF9KVQXGNE7jTdJuarU7mm3AzmmaMfvx",
                        "name": "Set Variables",
                        "title": "Store Variables",
                        "type": "core.set_multiple_variables",
                        "base_type": "activity",
                        "properties": {
                          "continue_on_failure": false,
                          "display_name": "Store Variables",
                          "skip_execution": false,
                          "variables_to_update": [
                            {
                              "variable_to_update": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.output.variable_workflow_02CWF4P3GVGOQ2ciVPq0mrQhNLD2YyG2JYj$",
                              "variable_value_new": "$activity.definition_activity_02CWESMCMMQ6L0ylC4S1o8BWxfWOkKkCPOl.output.jsonpath_queries.premier_onboarding_results_sxo_body_current_state$"
                            },
                            {
                              "variable_to_update": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.output.variable_workflow_02CWF50HJ39QP7AsltsUx0rMNsGaU0yMWLR$",
                              "variable_value_new": "$activity.definition_activity_02CWESMCMMQ6L0ylC4S1o8BWxfWOkKkCPOl.output.jsonpath_queries.premier_Org_ID$"
                            },
                            {
                              "variable_to_update": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.output.variable_workflow_02CWF5BUBIUUF0UuvZz5nTqUEAMapQ7Qv1i$",
                              "variable_value_new": "$activity.definition_activity_02CWESMCMMQ6L0ylC4S1o8BWxfWOkKkCPOl.output.jsonpath_queries.premier_onboarding-results_sxo_status$"
                            },
                            {
                              "variable_to_update": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.output.variable_workflow_02CWF5O34FYLM1Yw5DxZbhsz5GA5g4kQlDI$",
                              "variable_value_new": "$activity.definition_activity_02CWESMCMMQ6L0ylC4S1o8BWxfWOkKkCPOl.output.jsonpath_queries.premier_User_ID$"
                            },
                            {
                              "variable_to_update": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.output.variable_workflow_02CWH377EZZNT06gn2rsTdXbdKuZmMa63Sv$",
                              "variable_value_new": "$activity.definition_activity_02CWGW9VJXE7Z3kkhvJdJikdMkrZfuvvSxd.output.jsonpath_queries.Preimer_Tenant_BootStrap_Status$"
                            },
                            {
                              "variable_to_update": "$workflow.definition_workflow_02CWC2NRNE3UY6WjszIZ6o8X6Y1BndxqXCd.output.variable_workflow_02CWH3SWT9ZJ566tI8WXWyaEF5mrGmUNxHz$",
                              "variable_value_new": "$activity.definition_activity_02CWGW9VJXE7Z3kkhvJdJikdMkrZfuvvSxd.output.jsonpath_queries.Preimer_Tenant_Release_Version$"
                            }
                          ]
                        },
                        "object_type": "definition_activity"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "categories": [
      "category_1BMfMXSnJMyt5Ihqi7rWJr5N8cf"
    ]
  },
  "targets": {
    "definition_target_01V2DK78LVUZ907pxehYwas70qwmvnWRo22": {
      "unique_name": "definition_target_01V2DK78LVUZ907pxehYwas70qwmvnWRo22",
      "name": "ry mongo Data API",
      "title": "ry mongo Data API",
      "type": "web-service.endpoint",
      "base_type": "target",
      "object_type": "definition_target",
      "properties": {
        "disable_certificate_validation": false,
        "display_name": "ry mongo Data API",
        "host": "data.mongodb-api.com",
        "ignore_proxy": false,
        "no_runtime_user": true,
        "protocol": "https"
      }
    }
  },
  "subworkflows": [
    {
      "workflow": {
        "unique_name": "definition_workflow_02BC75FXY8V6Q7fCnqF2hIiteIL3tPcTIMX",
        "name": "Vinay - SXO- Create Token-Generate Token",
        "title": "Vinay - SXO- Create Token-Generate Token",
        "type": "generic.workflow",
        "base_type": "workflow",
        "variables": [
          {
            "schema_id": "datatype.string",
            "properties": {
              "value": "",
              "scope": "input",
              "name": "client_id",
              "type": "datatype.string",
              "is_required": true,
              "display_on_wizard": false,
              "is_invisible": false
            },
            "unique_name": "variable_workflow_02BC75FY6KJQ31bp06fvoXJ188gYh1wbUa7",
            "object_type": "variable_workflow"
          },
          {
            "schema_id": "datatype.string",
            "properties": {
              "value": "",
              "scope": "input",
              "name": "client-secret",
              "type": "datatype.string",
              "is_required": true,
              "display_on_wizard": false,
              "is_invisible": false
            },
            "unique_name": "variable_workflow_02BC8GA3DL7UT2XvjCn2jMUeOtCfsmMDZy4",
            "object_type": "variable_workflow"
          },
          {
            "schema_id": "datatype.string",
            "properties": {
              "value": "",
              "scope": "output",
              "name": "token",
              "type": "datatype.string",
              "is_required": false,
              "display_on_wizard": false,
              "is_invisible": false
            },
            "unique_name": "variable_workflow_02BC75FY6K85Y7UxbMgUx2RiWsymGSVCmQm",
            "object_type": "variable_workflow"
          }
        ],
        "properties": {
          "atomic": {
            "is_atomic": false
          },
          "delete_workflow_instance": false,
          "display_name": "Vinay - SXO- Create Token-Generate Token",
          "runtime_user": {
            "target_default": true
          },
          "target": {
            "target_type": "web-service.endpoint",
            "target_id": "$module_target;Cisco XDR;securex:ao:iroh_api$",
            "execute_on_workflow_target": true
          }
        },
        "object_type": "definition_workflow",
        "actions": [
          {
            "unique_name": "definition_activity_02BC75G22FOUZ4EkPmUFkyaUDv7ufY6XoyD",
            "name": "HTTP Request",
            "title": "Create token",
            "type": "web-service.http_request",
            "base_type": "activity",
            "properties": {
              "action_timeout": 180,
              "allow_auto_redirect": true,
              "allow_headers_redirect": false,
              "body": "client_secret=$workflow.definition_workflow_02BC75FXY8V6Q7fCnqF2hIiteIL3tPcTIMX.input.variable_workflow_02BC8GA3DL7UT2XvjCn2jMUeOtCfsmMDZy4$\u0026grant_type=client_credentials\u0026client_id=$workflow.definition_workflow_02BC75FXY8V6Q7fCnqF2hIiteIL3tPcTIMX.input.variable_workflow_02BC75FY6KJQ31bp06fvoXJ188gYh1wbUa7$",
              "continue_on_error_status_code": false,
              "continue_on_failure": true,
              "custom_headers": [
                {
                  "name": "Content-Type",
                  "value": "application/x-www-form-urlencoded"
                }
              ],
              "display_name": "Create token",
              "method": "POST",
              "relative_url": "/oauth2/token",
              "runtime_user": {
                "target_default": true
              },
              "skip_execution": false,
              "target": {
                "use_workflow_target": true
              }
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_02BC75G34XD9J77fLUiyGdXiTwppF2BuwNV",
            "name": "JSONPath Query",
            "title": "Get Token",
            "type": "corejava.jsonpathquery",
            "base_type": "activity",
            "properties": {
              "action_timeout": 180,
              "continue_on_failure": true,
              "display_name": "Get Token",
              "input_json": "$activity.definition_activity_02BC75G22FOUZ4EkPmUFkyaUDv7ufY6XoyD.output.response_body$",
              "jsonpath_queries": [
                {
                  "jsonpath_query": "$.access_token",
                  "jsonpath_query_name": "token",
                  "jsonpath_query_type": "string",
                  "zdate_type_format": "yyyy-MM-dd'T'HH:mm:ssZ"
                }
              ],
              "skip_execution": false
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_02BC75G4HIDLS4gLpshXHmYqx7felpNEF3o",
            "name": "Set Variables",
            "title": "Set token output variable to generated token",
            "type": "core.set_multiple_variables",
            "base_type": "activity",
            "properties": {
              "continue_on_failure": true,
              "display_name": "Set token output variable to generated token",
              "skip_execution": false,
              "variables_to_update": [
                {
                  "variable_to_update": "$workflow.definition_workflow_02BC75FXY8V6Q7fCnqF2hIiteIL3tPcTIMX.output.variable_workflow_02BC75FY6K85Y7UxbMgUx2RiWsymGSVCmQm$",
                  "variable_value_new": "$activity.definition_activity_02BC75G34XD9J77fLUiyGdXiTwppF2BuwNV.output.jsonpath_queries.token$"
                }
              ]
            },
            "object_type": "definition_activity"
          }
        ],
        "categories": [
          "category_1BMfMXSnJMyt5Ihqi7rWJr5N8cf"
        ]
      }
    }
  ],
  "dependent_workflows": [
    "definition_workflow_02BC75FXY8V6Q7fCnqF2hIiteIL3tPcTIMX"
  ],
  "module_targets": [
    {
      "module_type": "Cisco XDR",
      "external_id": "securex:ao:iroh_api"
    }
  ]
}